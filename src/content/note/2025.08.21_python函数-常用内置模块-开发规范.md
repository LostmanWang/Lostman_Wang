---
title: Python函数-常用内置模块&开发规范
description: Python函数-常用内置模块&开发规范
publishDate: 2025-08-21T17:06
---
## 一、常用内置模块--os

### 1、os 模块是什么？

#### 1.1、**概念**

* os 是 Python 标准库中与操作系统交互的“总管”。它把 POSIX/Linux、Windows、macOS 等底层系统调用包装成统一的 Python 接口，让你用同一套代码管理文件、目录、进程、环境变量等。

#### 1.2、导入方式

```python
import os
```

### 2、最常用 20 个方法（按功能分组）

#### 2.1、目录/文件路径操作

| 方法                                              | 作用          | 常用参数                                  | 返回值           |
| ----------------------------------------------- | ----------- | ------------------------------------- | ------------- |
| `os.getcwd()`                                   | 获取当前工作目录    | 无                                     | `str`，绝对路径    |
| `os.chdir(path)`                                | 切换工作目录      | path: `str`, 目标目录                     | 无             |
| `os.listdir(path='.')`                          | 列出目录内容      | path: `str` 或 `bytes`                 | `list[str]`   |
| `os.mkdir(path, mode=0o777)`                    | 创建单级目录      | path: `str`; mode: Unix 权限            | 无             |
| `os.makedirs(name, mode=0o777, exist_ok=False)` | 递归创建多级目录    | name: `str`; exist_ok: 若 True 已存在不抛异常 | 无             |
| `os.rmdir(path)`                                | 删除空目录       | path: `str`                           | 无             |
| `os.removedirs(name)`                           | 递归删空目录链     | name: `str`                           | 无             |
| `os.remove(path)`                               | 删除单个文件      | path: `str`                           | 无             |
| `os.rename(src, dst)`                           | 重命名或移动文件/目录 | src, dst: `str`                       | 无             |
| `os.path.exists(path)`                          | 判断路径是否存在    | path: `str`                           | `bool`        |
| `os.path.isfile(path)`                          | 判断是否为普通文件   | path: `str`                           | `bool`        |
| `os.path.isdir(path)`                           | 判断是否为目录     | path: `str`                           | `bool`        |
| `os.path.join(a, *p)`                           | 拼接路径        | 任意多个 `str`                            | `str`（带平台分隔符） |

#### 2.2、环境变量与进程

| 方法                             | 作用             | 常用参数                     | 返回值                   |     |
| ------------------------------ | -------------- | ------------------------ | --------------------- | --- |
| `os.getenv(key, default=None)` | 读取环境变量         | key: `str`; default: 默认值 | `str          | None` |     |
| `os.environ`                   | 环境变量映射         | 可读写 dict-like            | `os._Environ`         |     |
| `os.system(command)`           | 在子 shell 中执行命令 | command: `str`           | `int`（退出码）            |     |
| `os.getpid()`                  | 当前进程 PID       | 无                        | `int`                 |     |
| `os.kill(pid, sig)`            | 发信号给进程（Unix）   | pid: `int`; sig: `int`   | 无                     |     |

#### 2.3、文件描述符/权限

| 方法                                 | 作用           | 常用参数                      | 返回值                   |
| ---------------------------------- | ------------ | ------------------------- | --------------------- |
| `os.open(path, flags, mode=0o777)` | 低层打开文件，返回描述符 | path: `str`; flags: `int` | `int`，fd              |
| `os.close(fd)`                     | 关闭文件描述符      | fd: `int`                 | 无                     |
| `os.chmod(path, mode)`             | 修改权限         | path: `str`; mode: `int`  | 无                     |
| `os.stat(path)`                    | 获取文件元信息      | path: `str`               | `os.stat_result` 命名元组 |

#### 2.4、路径字符串高级工具（os.path 子模块）

| 语法                      | 作用          | 常用参数        | 返回值               |
| ----------------------- | ----------- | ----------- | ----------------- |
| `os.path.abspath(path)` | 转绝对路径       | path: `str` | `str`             |
| `os.path.dirname(p)`    | 取目录部分       | p: `str`    | `str`             |
| `os.path.basename(p)`   | 取文件名部分      | p: `str`    | `str`             |
| `os.path.splitext(p)`   | 拆分“文件名+扩展名” | p: `str`    | `tuple[str, str]` |

### 3、快速对照示例

```python
import os

# 1. 目录相关
os.makedirs('tmp/sub', exist_ok=True)   # 递归建目录
print(os.listdir('tmp'))                # ['sub']

# 2. 环境变量
path = os.getenv('PATH')
print(path.split(os.pathsep))           # PATH 列表

# 3. 文件描述符
fd = os.open('tmp/demo.txt', os.O_WRONLY | os.O_CREAT)
os.write(fd, b'hello os\n')
os.close(fd)

# 4. 路径工具
full = os.path.abspath('tmp/demo.txt')  # 绝对路径
root, ext = os.path.splitext(full)      # ('/…/tmp/demo', '.txt')
```

## 二、常用内置模块--shutil

### 1、shutil 模块是什么？

#### 1.1、**概念**

* shutil（shell utilities 的缩写）是 Python 标准库中 **高级文件与目录操作** 模块，用来弥补 os 模块在“复制、压缩、递归删除”等高阶功能上的不足。它封装了底层系统调用，支持一次性操作整个目录树、跨平台归档、压缩等。

#### 1.2、导入方式

```python
import shutil
```

### 2、最常用 12 个方法（按功能分组）

#### 2.1、复制相关

| 语法                                                                                                 | 作用                       | 常用参数                                                  | 返回值        |
| -------------------------------------------------------------------------------------------------- | ------------------------ | ----------------------------------------------------- | ---------- |
| `shutil.copy(src, dst, *, follow_symlinks=True)`                                                   | 复制文件 **内容+权限**（不含元数据）    | src, dst: `str` / `Path`；follow_symlinks: 是否跟随符号链接    | `str`，目标路径 |
| `shutil.copy2(src, dst, *, follow_symlinks=True)`                                                  | 复制文件 **内容+权限+元数据**（含时间戳） | 同上                                                    | `str`，目标路径 |
| `shutil.copyfile(src, dst, *, follow_symlinks=True)`                                               | 仅复制 **内容**（无权限/元数据）      | 同上                                                    | `str`，目标路径 |
| `shutil.copymode(src, dst, *, follow_symlinks=True)`                                               | 仅复制 **权限位**              | 同上                                                    | 无          |
| `shutil.copystat(src, dst, *, follow_symlinks=True)`                                               | 仅复制 **权限位+元数据**（不含内容）    | 同上                                                    | 无          |
| `shutil.copytree(src, dst, symlinks=False, ignore=None, copy_function=copy2, dirs_exist_ok=False)` | 递归复制整个目录树                | src, dst: `str` / `Path`；dirs_exist_ok: 允许目标已存在；其余见文档 | `str`，目标路径 |

#### 2.2、移动 / 删除

| 语法                                                       | 作用                    | 常用参数                                         | 返回值        |
| -------------------------------------------------------- | --------------------- | -------------------------------------------- | ---------- |
| `shutil.move(src, dst, copy_function=copy2)`             | 移动文件或目录（跨文件系统自动复制+删除） | src, dst: `str` / `Path`；copy_function: 拷贝函数 | `str`，目标路径 |
| `shutil.rmtree(path, ignore_errors=False, onerror=None)` | **递归删除整个目录树**         | path: `str` / `Path`；onerror: 回调处理删除失败       | 无          |

#### 2.3、磁盘使用

| 语法                        | 作用     | 常用参数                 | 返回值                                  |
| ------------------------- | ------ | -------------------- | ------------------------------------ |
| `shutil.disk_usage(path)` | 查询磁盘空间 | path: `str` / `Path` | `namedtuple(total, used, free)`，单位字节 |

#### 2.4、归档 / 压缩

| 语法                                                                                                                                    | 作用                                | 常用参数                                                | 返回值                          |
| ------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------- | --------------------------------------------------- | ---------------------------- |
| `shutil.make_archive(base_name, format, root_dir=None, base_dir=None, verbose=0, dry_run=False, owner=None, group=None, logger=None)` | 创建压缩归档（zip/tar/gztar/bztar/xztar） | base_name: 不含扩展名；format: `'zip'` 等；root_dir: 打包根目录  | `str`，生成的归档文件完整路径            |
| `shutil.unpack_archive(filename, extract_dir=None, format=None)`                                                                      | 解压缩归档                             | filename: `str`；extract_dir: 解压目录；format: 自动推断或显式指定 | 无                            |
| `shutil.get_archive_formats()`                                                                                                        | 获取当前系统支持的归档格式列表                   | 无                                                   | `list[tuple[str, str]]`      |
| `shutil.get_unpack_formats()`                                                                                                         | 获取支持的解压格式列表                       | 无                                                   | `list[tuple[str, str, str]]` |

### 3、快速对照示例

```python
import shutil, os, pathlib

# 1. 复制文件
shutil.copy2('data/report.txt', 'backup/report.txt')

# 2. 递归复制目录
dst = shutil.copytree('src', 'src_backup', dirs_exist_ok=True)

# 3. 移动目录
shutil.move('src_backup', 'archive/src_2025')

# 4. 删除目录
shutil.rmtree('tmp/cache')

# 5. 磁盘空间
usage = shutil.disk_usage('/')
print(usage.free / 2**30, 'GiB free')

# 6. 打包
zip_path = shutil.make_archive('project', 'zip', root_dir='.')
print('created', zip_path)

# 7. 解包
shutil.unpack_archive('project.zip', 'unpacked')
```
