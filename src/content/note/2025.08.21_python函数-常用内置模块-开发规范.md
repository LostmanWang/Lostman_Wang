---
title: Python函数-常用内置模块&开发规范
description: Python函数-常用内置模块&开发规范
publishDate: 2025-08-21T17:06
---
## 一、常用内置模块--os

### 1、os 模块是什么？

#### 1.1、**概念**

* os 是 Python 标准库中与操作系统交互的“总管”。它把 POSIX/Linux、Windows、macOS 等底层系统调用包装成统一的 Python 接口，让你用同一套代码管理文件、目录、进程、环境变量等。

#### 1.2、导入方式

```python
import os
```

### 2、最常用 20 个方法（按功能分组）

#### 2.1、目录/文件路径操作

| 方法                                              | 作用          | 常用参数                                  | 返回值           |
| ----------------------------------------------- | ----------- | ------------------------------------- | ------------- |
| `os.getcwd()`                                   | 获取当前工作目录    | 无                                     | `str`，绝对路径    |
| `os.chdir(path)`                                | 切换工作目录      | path: `str`, 目标目录                     | 无             |
| `os.listdir(path='.')`                          | 列出目录内容      | path: `str` 或 `bytes`                 | `list[str]`   |
| `os.mkdir(path, mode=0o777)`                    | 创建单级目录      | path: `str`; mode: Unix 权限            | 无             |
| `os.makedirs(name, mode=0o777, exist_ok=False)` | 递归创建多级目录    | name: `str`; exist_ok: 若 True 已存在不抛异常 | 无             |
| `os.rmdir(path)`                                | 删除空目录       | path: `str`                           | 无             |
| `os.removedirs(name)`                           | 递归删空目录链     | name: `str`                           | 无             |
| `os.remove(path)`                               | 删除单个文件      | path: `str`                           | 无             |
| `os.rename(src, dst)`                           | 重命名或移动文件/目录 | src, dst: `str`                       | 无             |
| `os.path.exists(path)`                          | 判断路径是否存在    | path: `str`                           | `bool`        |
| `os.path.isfile(path)`                          | 判断是否为普通文件   | path: `str`                           | `bool`        |
| `os.path.isdir(path)`                           | 判断是否为目录     | path: `str`                           | `bool`        |
| `os.path.join(a, *p)`                           | 拼接路径        | 任意多个 `str`                            | `str`（带平台分隔符） |

#### 2.2、环境变量与进程

| 方法                             | 作用             | 常用参数                     | 返回值                   |     |
| ------------------------------ | -------------- | ------------------------ | --------------------- | --- |
| `os.getenv(key, default=None)` | 读取环境变量         | key: `str`; default: 默认值 | `str          | None` |     |
| `os.environ`                   | 环境变量映射         | 可读写 dict-like            | `os._Environ`         |     |
| `os.system(command)`           | 在子 shell 中执行命令 | command: `str`           | `int`（退出码）            |     |
| `os.getpid()`                  | 当前进程 PID       | 无                        | `int`                 |     |
| `os.kill(pid, sig)`            | 发信号给进程（Unix）   | pid: `int`; sig: `int`   | 无                     |     |

#### 2.3、文件描述符/权限

| 方法                                 | 作用           | 常用参数                      | 返回值                   |
| ---------------------------------- | ------------ | ------------------------- | --------------------- |
| `os.open(path, flags, mode=0o777)` | 低层打开文件，返回描述符 | path: `str`; flags: `int` | `int`，fd              |
| `os.close(fd)`                     | 关闭文件描述符      | fd: `int`                 | 无                     |
| `os.chmod(path, mode)`             | 修改权限         | path: `str`; mode: `int`  | 无                     |
| `os.stat(path)`                    | 获取文件元信息      | path: `str`               | `os.stat_result` 命名元组 |

#### 2.4、路径字符串高级工具（os.path 子模块）

| 语法                      | 作用          | 常用参数        | 返回值               |
| ----------------------- | ----------- | ----------- | ----------------- |
| `os.path.abspath(path)` | 转绝对路径       | path: `str` | `str`             |
| `os.path.dirname(p)`    | 取目录部分       | p: `str`    | `str`             |
| `os.path.basename(p)`   | 取文件名部分      | p: `str`    | `str`             |
| `os.path.splitext(p)`   | 拆分“文件名+扩展名” | p: `str`    | `tuple[str, str]` |

### 3、快速对照示例

```python
import os

# 1. 目录相关
os.makedirs('tmp/sub', exist_ok=True)   # 递归建目录
print(os.listdir('tmp'))                # ['sub']

# 2. 环境变量
path = os.getenv('PATH')
print(path.split(os.pathsep))           # PATH 列表

# 3. 文件描述符
fd = os.open('tmp/demo.txt', os.O_WRONLY | os.O_CREAT)
os.write(fd, b'hello os\n')
os.close(fd)

# 4. 路径工具
full = os.path.abspath('tmp/demo.txt')  # 绝对路径
root, ext = os.path.splitext(full)      # ('/…/tmp/demo', '.txt')
```

## 二、常用内置模块--shutil

### 1、shutil 模块是什么？

#### 1.1、**概念**

* shutil（shell utilities 的缩写）是 Python 标准库中 **高级文件与目录操作** 模块，用来弥补 os 模块在“复制、压缩、递归删除”等高阶功能上的不足。它封装了底层系统调用，支持一次性操作整个目录树、跨平台归档、压缩等。

#### 1.2、导入方式

```python
import shutil
```

### 2、最常用 12 个方法（按功能分组）

#### 2.1、复制相关

| 语法                                                                                                 | 作用                       | 常用参数                                                  | 返回值        |
| -------------------------------------------------------------------------------------------------- | ------------------------ | ----------------------------------------------------- | ---------- |
| `shutil.copy(src, dst, *, follow_symlinks=True)`                                                   | 复制文件 **内容+权限**（不含元数据）    | src, dst: `str` / `Path`；follow_symlinks: 是否跟随符号链接    | `str`，目标路径 |
| `shutil.copy2(src, dst, *, follow_symlinks=True)`                                                  | 复制文件 **内容+权限+元数据**（含时间戳） | 同上                                                    | `str`，目标路径 |
| `shutil.copyfile(src, dst, *, follow_symlinks=True)`                                               | 仅复制 **内容**（无权限/元数据）      | 同上                                                    | `str`，目标路径 |
| `shutil.copymode(src, dst, *, follow_symlinks=True)`                                               | 仅复制 **权限位**              | 同上                                                    | 无          |
| `shutil.copystat(src, dst, *, follow_symlinks=True)`                                               | 仅复制 **权限位+元数据**（不含内容）    | 同上                                                    | 无          |
| `shutil.copytree(src, dst, symlinks=False, ignore=None, copy_function=copy2, dirs_exist_ok=False)` | 递归复制整个目录树                | src, dst: `str` / `Path`；dirs_exist_ok: 允许目标已存在；其余见文档 | `str`，目标路径 |

#### 2.2、移动 / 删除

| 语法                                                       | 作用                    | 常用参数                                         | 返回值        |
| -------------------------------------------------------- | --------------------- | -------------------------------------------- | ---------- |
| `shutil.move(src, dst, copy_function=copy2)`             | 移动文件或目录（跨文件系统自动复制+删除） | src, dst: `str` / `Path`；copy_function: 拷贝函数 | `str`，目标路径 |
| `shutil.rmtree(path, ignore_errors=False, onerror=None)` | **递归删除整个目录树**         | path: `str` / `Path`；onerror: 回调处理删除失败       | 无          |

#### 2.3、磁盘使用

| 语法                        | 作用     | 常用参数                 | 返回值                                  |
| ------------------------- | ------ | -------------------- | ------------------------------------ |
| `shutil.disk_usage(path)` | 查询磁盘空间 | path: `str` / `Path` | `namedtuple(total, used, free)`，单位字节 |

#### 2.4、归档 / 压缩

| 语法                                                                                                                                    | 作用                                | 常用参数                                                | 返回值                          |
| ------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------- | --------------------------------------------------- | ---------------------------- |
| `shutil.make_archive(base_name, format, root_dir=None, base_dir=None, verbose=0, dry_run=False, owner=None, group=None, logger=None)` | 创建压缩归档（zip/tar/gztar/bztar/xztar） | base_name: 不含扩展名；format: `'zip'` 等；root_dir: 打包根目录  | `str`，生成的归档文件完整路径            |
| `shutil.unpack_archive(filename, extract_dir=None, format=None)`                                                                      | 解压缩归档                             | filename: `str`；extract_dir: 解压目录；format: 自动推断或显式指定 | 无                            |
| `shutil.get_archive_formats()`                                                                                                        | 获取当前系统支持的归档格式列表                   | 无                                                   | `list[tuple[str, str]]`      |
| `shutil.get_unpack_formats()`                                                                                                         | 获取支持的解压格式列表                       | 无                                                   | `list[tuple[str, str, str]]` |

### 3、快速对照示例

```python
import shutil, os, pathlib

# 1. 复制文件
shutil.copy2('data/report.txt', 'backup/report.txt')

# 2. 递归复制目录
dst = shutil.copytree('src', 'src_backup', dirs_exist_ok=True)

# 3. 移动目录
shutil.move('src_backup', 'archive/src_2025')

# 4. 删除目录
shutil.rmtree('tmp/cache')

# 5. 磁盘空间
usage = shutil.disk_usage('/')
print(usage.free / 2**30, 'GiB free')

# 6. 打包
zip_path = shutil.make_archive('project', 'zip', root_dir='.')
print('created', zip_path)

# 7. 解包
shutil.unpack_archive('project.zip', 'unpacked')
```

## 三、常用内置模块--sys

### 1、sys 模块是什么？

#### 1.1、**概念**

* sys 是 Python 解释器自带的系统级接口模块，提供与当前进程运行环境交互的变量和函数，如命令行参数、模块搜索路径、标准 I/O 和退出控制。是调试、部署和跨平台脚本中不可或缺的“解释器管家”。

#### 1.2、导入方式

```python
import sys
```

### 2、最常用 2 个方法（按功能分组）

#### 2.1、命令行与环境信息

| 语法               | 作用                                | 参数  | 返回值         |
| ---------------- | --------------------------------- | --- | ----------- |
| `sys.argv`       | 以列表形式存放启动脚本时的命令行参数，`argv[0]` 为脚本名 | 无   | `List[str]` |
| `sys.executable` | 当前 Python 解释器的绝对路径                | 无   | `str`       |
| `sys.path`       | 模块搜索路径列表（可修改）                     | 无   | `List[str]` |
| `sys.prefix`     | 当前 Python 安装前缀（虚拟环境时为虚拟环境根目录）     | 无   | `str`       |

#### 2.2、程序退出与异常

| 语法                                                        | 作用                        | 参数         | 返回值                        |
| --------------------------------------------------------- | ------------------------- | ---------- | -------------------------- |
| `sys.exit([arg])`                                         | 立即终止解释器；`arg` 可为整数、字符串或对象 | `arg=None` | 无（进程结束）                    |
| `sys.exc_info()`                                          | 获取当前线程正在处理的异常三元组          | 无          | `(type, value, traceback)` |
| `sys.last_type` / `sys.last_value` / `sys.last_traceback` | 交互式解释器中最近一次未捕获异常信息        | 无          | 与 `exc_info()` 对应          |

#### 2.3、标准 I/O 流重定向（文件对象）

| 语法                                            | 作用        | 参数  | 返回值             |
| --------------------------------------------- | --------- | --- | --------------- |
| `sys.stdin`                                   | 标准输入流     | 无   | `TextIOWrapper` |
| `sys.stdout`                                  | 标准输出流     | 无   | `TextIOWrapper` |
| `sys.stderr`                                  | 标准错误流     | 无   |                 |
| `sys.__stdin__` / `__stdout__` / `__stderr__` | 启动时的原始流备份 | 无   | `TextIOWrapper` |

#### 2.4、模块加载与元数据

| 语法                         | 作用                     | 参数  | 返回值                    |
| -------------------------- | ---------------------- | --- | ---------------------- |
| `sys.modules`              | 已加载模块的字典（键为模块名，值为模块对象） | 无   | `Dict[str, Module]`    |
| `sys.meta_path`            | 自定义导入机制的查找器列表          | 无   | `List[MetaPathFinder]` |
| `sys.builtin_module_names` | 解释器内置模块名称的元组           | 无   | `Tuple[str, ...]`      |

#### 2.5、解释器与运行时信息

| 语法                   | 作用                                                    | 参数  | 返回值                |
| -------------------- | ----------------------------------------------------- | --- | ------------------ |
| `sys.version`        | 解释器版本字符串                                              | 无   | `str`              |
| `sys.version_info`   | 版本号组成的命名元组（major, minor, micro, releaselevel, serial） | 无   | `sys.version_info` |
| `sys.platform`       | 平台标识符，如 `'win32'`、`'linux'`、`'darwin'`                | 无   | `str`              |
| `sys.implementation` | 当前 Python 实现的信息命名元组                                   | 无   | `SimpleNamespace`  |

#### 2.6、引用计数与垃圾回收

| 语法                              | 作用                      | 参数                      | 返回值   |
| ------------------------------- | ----------------------- | ----------------------- | ----- |
| `sys.getrefcount(obj)`          | 返回对象的引用计数（+1，因形参本身）     | `obj: Any`              | `int` |
| `sys.getsizeof(obj[, default])` | 返回对象占用内存字节数（CPython 实现） | `obj: Any, default=...` | `int` |

#### 2.7、递归/栈限制

| 语法                             | 作用         | 参数           | 返回值   |
| ------------------------------ | ---------- | ------------ | ----- |
| `sys.getrecursionlimit()`      | 获取当前最大递归深度 | 无            | `int` |
| `sys.setrecursionlimit(limit)` | 设置最大递归深度   | `limit: int` | 无     |

#### 2.8、跟踪与性能分析

| 语法                     | 作用                 | 参数                          | 返回值                   |
| ---------------------- | ------------------ | --------------------------- | --------------------- |
| `sys.settrace(func)`   | 安装全局跟踪函数，用于调试/性能分析 | `func: TraceFunc \| None`   | 无                     |
| `sys.gettrace()`       | 获取当前全局跟踪函数         | 无                           | `TraceFunc \| None`   |
| `sys.setprofile(func)` | 安装性能分析函数           | `func: ProfileFunc \| None` | 无                     |
| `sys.getprofile()`     | 获取当前性能分析函数         | 无                           | `ProfileFunc \| None` |

#### 2.9、字节序与整数信息

| 语法              | 作用                          | 参数  | 返回值   |
| --------------- | --------------------------- | --- | ----- |
| `sys.byteorder` | 本机字节序，`'little'` 或 `'big'`  | 无   | `str` |
| `sys.maxsize`   | 平台最大 `Py_ssize_t` 值（列表索引上限） | 无   | `int` |

#### 2.10、其他实用工具

| 语法                         | 作用                    | 参数            | 返回值   |
| -------------------------- | --------------------- | ------------- | ----- |
| `sys.intern(string)`       | 将字符串驻留（intern），减少重复对象 | `string: str` | `str` |
| `sys.getdefaultencoding()` | 获取当前默认字符串编码           | 无             | `str` |

### 3、快速对照示例

```python
import sys, os, pathlib

# 1. 命令行参数
print(sys.argv)                       # ['demo.py', '--verbose', '42']

# 2. 解释器路径
print(sys.executable)                 # /usr/bin/python3.11

# 3. 模块搜索路径（添加自定义目录）
sys.path.insert(0, './my_pkgs')

# 4. 版本信息
print(sys.version)                    # 3.11.4 (main, Jun  6 2023, 00:00:00) ...

# 5. 退出程序并返回状态码
# sys.exit(0)                         # 正常退出

# 6. 标准输入逐行读取
for line in sys.stdin:
    sys.stdout.write(line.upper())

# 7. 刷新缓冲区
sys.stdout.flush()
```

## 三、常用内置模块--random

### 1、random 模块是什么？

#### 1.1、**概念**

* **random 基于 Mersenne Twister 伪随机数生成器，为仿真、抽样、加密强度以下的一般随机需求提供快速实现。**

#### 1.2、导入方式

```python
import random
```

### 2、最常用 2 个方法（按功能分组）

#### 2.1、初始化与状态管理

| 语法                               | 作用                           | 参数                                          | 返回值           |
| -------------------------------- | ---------------------------- | ------------------------------------------- | ------------- |
| `random.seed(a=None, version=2)` | 用可哈希对象 a 初始化随机状态；None → 系统时间 | `a`: int/str/bytes/None<br>`version`: 2 或 1 | `None`        |
| `random.getstate()`              | 获取当前随机数生成器状态（可恢复）            | 无                                           | `tuple`（状态对象） |
| `random.setstate(state)`         | 恢复先前保存的状态                    | `state`: `tuple`                            | `None`        |
| `random.getrandbits(k)`          | 生成 k 位（二进制位）随机整数             | `k`: int ≥ 0                                | `int`         |

#### 2.2、区间随机整数

| 语法                                                                  | 作用                                     | 参数          | 返回值   |
| ------------------------------------------------------------------- | -------------------------------------- | ----------- | ----- |
| `random.randrange(stop)`<br>`random.randrange(start, stop[, step])` | 从 `range(start, stop, step)` 中随机返回一个整数 | 同 `range()` | `int` |
| `random.randint(a, b)`                                              | 闭区间 `[a, b]` 内随机整数                     | `a, b`: int | `int` |

#### 2.3、区间随机浮点数

| 语法                                   | 作用                           | 参数                                    | 返回值     |
| ------------------------------------ | ---------------------------- | ------------------------------------- | ------- |
| `random.random()`                    | `[0.0, 1.0)` 之间的随机浮点数        | 无                                     | `float` |
| `random.uniform(a, b)`               | `[a, b]`（或 `[b, a]`）之间的随机浮点数 | `a, b`: float                         | `float` |
| `random.triangular(low, high, mode)` | 三角分布随机数，`mode` 为峰值           | `low, high, mode`: float              | `float` |
| `random.betavariate(alpha, beta)`    | Beta(α, β) 分布                | α, β > 0                              | `float` |
| `random.expovariate(lambd)`          | 指数分布，λ 为率参数                  | `lambd`: float > 0                    | `float` |
| `random.gammavariate(alpha, beta)`   | Gamma(α, β) 分布               | α, β > 0                              | `float` |
| `random.gauss(mu, sigma)`            | 高斯（正态）分布                     | `mu, sigma`: float                    | `float` |
| `random.normalvariate(mu, sigma)`    | 高斯分布（线程安全实现）                 | `mu, sigma`: float                    | `float` |
| `random.lognormvariate(mu, sigma)`   | 对数正态分布                       | `mu, sigma`: float                    | `float` |
| `random.vonmisesvariate(mu, kappa)`  | von Mises（圆周正态）分布            | `mu`: float（弧度）<br>`kappa`: float ≥ 0 | `float` |
| `random.paretovariate(alpha)`        | 帕累托分布                        | `alpha`: float > 0                    | `float` |
| `random.weibullvariate(alpha, beta)` | 威布尔分布                        | `alpha, beta`: float > 0              | `float` |

#### 2.4、序列随机操作

| 语法                                                                   | 作用             | 参数                                                                                      | 返回值         |
| -------------------------------------------------------------------- | -------------- | --------------------------------------------------------------------------------------- | ----------- |
| `random.choice(seq)`                                                 | 从非空序列中随机返回一个元素 | `seq`: Sequence                                                                         | 元素          |
| `random.choices(population, weights=None, *, cum_weights=None, k=1)` | 有放回抽样，可带权重     | `population`: Sequence<br>`weights/cum_weights`: Sequence\[float] | None<br>`k`: int    | `List[Any]` |
| `random.sample(population, k, *, counts=None)`                       | 无放回抽样 k 个不同元素  | `population`: Sequence<br>`k`: int ≤ len(population)<br>`counts`: Sequence\[int] | None | `List[Any]` |
| `random.shuffle(x[, random])`                                        | 就地打乱可变序列       | `x`: MutableSequence<br>`random`: 可调用随机源                                                | `None`      |

#### 2.5、

#### 2.6、

#### 2.7、

#### 2.8、

#### 2.9、

#### 2.10、

### 3、快速对照示例
