---
title: Python数据类型-基础数据类型-映射类型 --- dict
description: 映射类型 --- dict
publishDate: 2025-08-05T19:48
---
* 字典是以关键字（键）为索引，关键字（键）可以是任意不可变类型
* 字典由键和对应值成对组成，字典中所有的键值对放在 { } 中间，每一对键值之间用逗号分开

## 一、构造方法

### 1、字面量直接构造

```python
d1 = {}                    # 空 dict
d2 = {'a': 1, 'b': 2}      # 键值对字面量
d3 = {                     # 多行可读性高
    'name': 'Alice',
    'age': 30
}
```

* 键必须是 **可哈希** 对象；值任意。
* 重复键以 **最后一次** 为准。

### 2、内置构造函数 `dict(**kwargs)` / `dict(mapping)` / `dict(iterable)`

| 调用形式                       | 说明                      |
| -------------------------- | ----------------------- |
| `dict()`                   | 空字典                     |
| `dict(a=1, b=2)`           | 关键字参数 → `{'a':1,'b':2}` |
| `dict([('a',1), ('b',2)])` | 二元组/列表迭代                |
| `dict(zip(keys, values))`  | 并行序列组合                  |
| `dict({'a':1}, b=2)`       | 先映射再关键字参数               |

支持 **任意可迭代**，只要元素是 **长度为 2 的子序列**。

### 3、字典推导式（Dict Comprehension）

```python
squares = {x: x**2 for x in range(5)}          # {0:0,1:1,2:4,3:9,4:16}
odd_only = {k: v for k, v in some_dict.items() if v % 2}
```

* 语法：`{键表达式: 值表达式 for 变量 in 可迭代 [if 条件]}`。
* 支持嵌套循环、条件过滤。

### 4、映射解包（PEP 448）

```python
defaults = {'host': '127.0.0.1', 'port': 3306}
user = {'host': '192.168.1.10'}
merged = {**defaults, **user}   # 后写覆盖前写
```

### 5、类方法 `fromkeys`

```python
keys = ['a', 'b', 'c']
d = dict.fromkeys(keys, 0)   # {'a':0, 'b':0, 'c':0}
```

* 第一个参数：可迭代键序列；第二个参数：默认值（浅拷贝）。

### 6、生成器表达式转 dict

```python
d = dict((k, f(k)) for k in iterable)
```

* 等价于推导式，但可读性略低。

### 7、与第三方对象互转

| 来源                    | 示例                      | 备注            |
| --------------------- | ----------------------- | ------------- |
| `collections.Counter` | `dict(Counter('aab'))`  | 频率 → dict     |
| `json.loads`          | `json.loads('{"x":1}')` | JSON → dict   |
| `csv.DictReader`      | `dict(DictReader(f))`   | CSV → dict    |
| `pandas.Series`       | `s.to_dict()`           | Pandas → dict |

### 8、空值快捷构造

```python
# 常用工厂
empty = dict()
empty2 = {}
```

### 9、性能与陷阱

* 键重复：字面量 **后值覆盖前值**。
* 不可哈希键：会抛 `TypeError: unhashable type`。
* 顺序：Python 3.7+ **保留插入顺序**，但语义上仍视为无序。
