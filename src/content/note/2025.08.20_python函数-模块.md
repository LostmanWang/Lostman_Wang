---
title: Python函数-模块
description: Python函数-模块
publishDate: 2025-08-20T10:16
---
## 一、模块和包

### 1、概念

* **模块（module）** 就是一个 `.py` 文件；
* **包（package）** 是含 `__init__.py` 的目录，可嵌套子包；
* **import** 的本质是按 **搜索路径** 找到模块/包，把它变成 **对象** 放到当前命名空间。

### 2、文件结构示例

```
myproj/                 # 项目根
├── mypkg/              # 包
│   ├── __init__.py     # 包初始化（可为空）
│   ├── mod_a.py        # 模块
│   └── subpkg/         # 子包
│       ├── __init__.py
│       └── mod_b.py
└── main.py             # 主脚本
```

### 3、搜索顺序（sys.path）

1. 当前脚本所在目录
2. PYTHONPATH 环境变量
3. 标准库目录
4. site-packages（第三方包）

```python
import sys
print(sys.path)
```

### 4、导入包的方法

| 语法                                      | 效果                                                     |
| --------------------------------------- | ------------------------------------------------------ |
| `import pkg`                            | 将包 `pkg` 整体加载，并用同名变量 `pkg` 引用                          |
| `import pkg1, pkg2`                     | 一次性加载多个包，分别用同名变量 `pkg1`、`pkg2` 引用                      |
| `import pkg as alias`                   | 将包 `pkg` 整体加载，并用自定义别名 `alias` 引用                       |
| `import pkg1 as alias1, pkg2 as alias2` | 同时加载多个包，并分别用别名 `alias1`、`alias2` 引用                    |
| `import superpkg.subpkg`                | 将子包 `superpkg.subpkg` 整体加载，并用同名变量 `superpkg.subpkg` 引用 |
| `from superpkg import subpkg`           | 将子包 `subpkg` 直接导入当前命名空间，可直接使用 `subpkg` 调用              |

### 5、导入模块的方法

| 语法                         | 效果                                                                        |
| -------------------------- | ------------------------------------------------------------------------- |
| `import pkg.mod`           | 把包 `pkg` 中的模块 `mod` 整体载入，使用时必须写全限定名 `pkg.mod.xxx`。                        |
| `import pkg.mod as alias`  | 同上，但把模块绑定到自定义别名 `alias`，后续用 `alias.xxx` 调用，简化或避免命名冲突。                     |
| `from pkg import mod`      | 只把模块对象 `mod` 从包 `pkg` 中“提取”到当前命名空间，使用时直接写 `mod.xxx`，无需再写包前缀。              |
| `from pkg.mod import func` | 把模块 `pkg.mod` 中的具体对象（如函数、类、变量）`func` 直接放入当前命名空间，使用时直接写 `func()` 或 `func`。 |

* import.. ：导入最小单位是模块，而不是变量、函数名、类名
* from .. import .. ：导入最小单位可以是模块，也可以是变量、函数名、类名

### 6、绝对 vs 相对导入

| 类型  | 写法                    | 说明                       |
| --- | --------------------- | ------------------------ |
| 绝对  | `import mypkg.mod_a`  | 从 **搜索路径根** 开始找          |
| 相对  | `from . import mod_a` | `.` 当前包，`..` 父包（只能在包内部用） |

```python
from .subpkg import mod_b      # 相对导入
import mypkg.subpkg.mod_b      # 绝对导入
```

### 7、常见坑 & 修复

| 坑             | 现象                    | 修复                       |
| ------------- | --------------------- | ------------------------ |
| **循环导入**      | ImportError           | 延迟导入（函数内 import）或重构      |
| **相对导入脚本**    | `ModuleNotFoundError` | 用 `-m` 运行包，或改为绝对导入       |
| **同名文件挡住标准库** | 标准库被覆盖                | 改名或调整 `sys.path`         |
| **包内直接运行**    | `__main__` 路径错        | 使用 `python -m mypkg.mod` |

### 8、执行入口（主函数）

#### 8.1、基本语法

```python
def main():
    # 主要的程序逻辑
    print("这是主函数")
    
if __name__ == "__main__":
    main()
```

#### 8.2、`__name__` 变量的作用

* 当 Python 文件被直接运行时，`__name__` 的值为 "`__main__`"
* 当 Python 文件被导入为模块时，`__name__` 的值为模块名（文件名）

```python
# my_module.py

def helper_function():
    """一个辅助函数"""
    print("辅助函数被调用")
    
def main():
    """主函数，程序的入口点"""
    print("程序开始执行")
    helper_function()
    print("程序执行结束")

# 这是标准的执行入口检查
if __name__ == "__main__":
    main()
```

## 二、第三方模块

## 三、内置模块

|                |                |               |                   |                |
| -------------- | -------------- | ------------- | ----------------- | -------------- |
| `_thread`      | `abc`          | `aifc`        | `argparse`        | `array`        |
| `ast`          | `asynchat`     | `asyncio`     | `asyncore`        | `atexit`       |
| `audioop`      | `base64`       | `bdb`         | `binascii`        | `binhex`       |
| `bisect`       | `builtins`     | `bz2`         | `calendar`        | `cgi`          |
| `cgitb`        | `chunk`        | `cmath`       | `cmd`             | `code`         |
| `codecs`       | `codeop`       | `collections` | `colorsys`        | `compileall`   |
| `concurrent`   | `configparser` | `contextlib`  | `contextvars`     | `copy`         |
| `copyreg`      | `cProfile`     | `crypt`       | `csv`             | `ctypes`       |
| `curses`       | `dataclasses`  | `datetime`    | `dbm`             | `decimal`      |
| `difflib`      | `dis`          | `distutils`   | `doctest`         | `email`        |
| `encodings`    | `ensurepip`    | `enum`        | `errno`           | `faulthandler` |
| `fcntl`        | `filecmp`      | `fileinput`   | `fnmatch`         | `fractions`    |
| `ftplib`       | `functools`    | `gc`          | `getopt`          | `getpass`      |
| `gettext`      | `glob`         | `grp`         | `gzip`            | `hashlib`      |
| `heapq`        | `hmac`         | `html`        | `http`            | `imaplib`      |
| `imghdr`       | `imp`          | `importlib`   | `inspect`         | `io`           |
| `ipaddress`    | `itertools`    | `json`        | `keyword`         | `lib2to3`      |
| `linecache`    | `locale`       | `logging`     | `lzma`            | `mailbox`      |
| `mailcap`      | `marshal`      | `math`        | `mimetypes`       | `mmap`         |
| `modulefinder` | `msilib`       | `msvcrt`      | `multiprocessing` | `netrc`        |
| `nis`          | `nntplib`      | `ntpath`      | `numbers`         | `operator`     |
| `optparse`     | `os`           | `ossaudiodev` | `parser`          | `pathlib`      |
| `pdb`          | `pickle`       | `pickletools` | `pipes`           | `pkgutil`      |
| `platform`     | `plistlib`     | `poplib`      | `posix`           | `posixpath`    |
| `pprint`       | `profile`      | `pstats`      | `pty`             | `pwd`          |
| `py_compile`   | `pyclbr`       | `pydoc`       | `queue`           | `quopri`       |
| `random`       | `re`           | `readline`    | `reprlib`         | `resource`     |
| `rlcompleter`  | `runpy`        | `sched`       | `secrets`         | `select`       |
| `selectors`    | `shelve`       | `shlex`       | `shutil`          | `signal`       |
| `site`         | `smtpd`        | `smtplib`     | `sndhdr`          | `socket`       |
| `socketserver` | `spwd`         | `sqlite3`     | `ssl`             | `stat`         |
| `statistics`   | `string`       | `stringprep`  | `struct`          | `subprocess`   |
| `sunau`        | `symbol`       | `symtable`    | `sys`             | `sysconfig`    |
| `syslog`       | `tabnanny`     | `tarfile`     | `telnetlib`       | `tempfile`     |
| `termios`      | `textwrap`     | `this`        | `threading`       | `time`         |
| `timeit`       | `tkinter`      | `token`       | `tokenize`        | `trace`        |
| `traceback`    | `tracemalloc`  | `tty`         | `turtle`          | `turtledemo`   |
| `types`        | `typing`       | `unicodedata` | `unittest`        | `urllib`       |
| `uu`           | `uuid`         | `venv`        | `warnings`        | `wave`         |
| `weakref`      | `webbrowser`   | `winreg`      | `winsound`        | `wsgiref`      |
| `xdrlib`       | `xml`          | `zipapp`      | `zipfile`         | `zipimport`    |
| `zlib`         |                |               |                   |                |

:::tip
1、个别模块只在特定平台或编译选项下存在（如 `winreg`、`nis`、`ossaudiodev`）。
2、带前缀 `_` 的模块被视为实现细节，但仍可直接 import。
:::

### 1、

### 2、
