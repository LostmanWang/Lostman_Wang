---
title: Python函数-函数进阶
description: 函数进阶
publishDate: 2025-08-08T14:52
---
## 一、函数参数传递

* 在 CPython 中，所有参数传递都是“对象指针（内存地址）的按值拷贝”——官方称为 call-by-object-reference。

### 1、内存模型总览

```
调用者栈帧                被调函数栈帧
┌────────┐               ┌────────┐
│ 变量 a │──→ 对象 1001  ←──│ 形参 x │
└────────┘               └────────┘
```

* `a` 和 `x` 各自保存 **同一份对象** 地址 1001。
* 对 **对象本身** 的修改，取决于 1001 指向的对象 **是否可变**。

### 2、不可变类型：重新绑定 = 新建对象

```python
def inc(n):
    n += 1        # 新建 int 对象，x 指向新地址
    print(id(n))  # 与外部不同
a = 10
inc(a)
print(a)          # 10
```

#### 字节码关键指令

```python
LOAD_FAST 0 (n)
LOAD_CONST 1 (1)
INPLACE_ADD      # 新建 int，赋值回 n
```

* 形参 `n` 指向 新对象，外部 `a` 仍指向旧对象 → 值不变。

### 3、可变类型：原地修改 = 外部可见
